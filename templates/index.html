<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Seating Map • Reservations</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #seating-map{
      display:grid;
      grid-template-columns:repeat(6,130px) 80px repeat(6,130px);
      grid-auto-rows:130px;
      gap:15px;
      padding:20px;
      background:#fff;
      border-radius:12px;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      width:max-content;
      margin:0 auto;
    }
    .table-card{
      width:130px;height:130px;border-radius:50%;border:4px solid;
      display:flex;align-items:center;justify-content:center;
      font-weight:700;cursor:pointer;user-select:none;
      transition:transform .15s ease, box-shadow .15s ease;
      text-align:center;line-height:1.15;padding:10px
    }
    .table-card:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(0,0,0,.08)}
    .aisle{grid-column:7;width:100%;height:100%;min-height:130px;border-left:3px dashed #bbb;border-right:3px dashed #bbb;position:relative}
    .aisle::before{content:'AISLE';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-90deg);font-size:12px;color:#999;letter-spacing:2px}
    
    /* === (1) START: 10個群組顏色 === */
    .group-main    { background:#fecaca; border-color:#ef4444; } /* 1. Main (紅) */
    .group-eero    { background:#bbf7d0; border-color:#22c55e; } /* 2. eero (綠) */
    .group-ops     { background:#bae6fd; border-color:#0ea5e9; } /* 3. Operation (藍) */
    .group-hw      { background:#d8b4fe; border-color:#9333ea; } /* 4. Hardware (紫) */
    .group-sw      { background:#fef08a; border-color:#ca8a04; } /* 5. Software (黃) */
    .group-ai      { background:#fed7aa; border-color:#f97316; } /* 6. AI Team (橘) */
    .group-devices { background:#99f6e4; border-color:#14b8a6; } /* 7. Devices (藍綠) */
    .group-others  { background:#e5e7eb; border-color:#6b7280; } /* 8. Others (灰) */
    .group-tpm     { background:#c7d2fe; border-color:#4f46e5; } /* 9. TPM (靛) */
    .group-sidewalk{ background:#fbcfe8; border-color:#ec4899; } /* 10. Sidewalk (粉紅) */

    /* 部門/群組名稱樣式 */
    .dept-name {
      display: block;
      font-size: 13px;
      font-weight: 800;
      line-height: 1.2;
      margin-bottom: 4px;
      color: #1f2937; /* 深灰色字 */
    }
    /* === (1) END: 群組顏色 === */

    .status-disabled{opacity:.55;cursor:not-allowed;pointer-events:none}
    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:1000}
    .modal-backdrop.show{display:flex}
    .modal-card{width:min(92vw,460px);background:#fff;border-radius:16px;box-shadow:0 24px 60px rgba(0,0,0,.25);padding:18px 18px 14px}
    .modal-card h3{margin:0 0 12px;font-size:18px;font-weight:800}
    .modal-row{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
    .modal-row label{font-size:12px;color:#374151}
    .modal-row input,.modal-row select{border:1px solid #d0d5dd;border-radius:10px;padding:10px 12px;font-size:14px}
    .modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:8px}
    .btn{border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer;border:1px solid transparent}
    .btn.secondary{background:#fff;border-color:#d0d5dd;color:#374151}
    .btn.primary{background:#4f46e5;color:#fff}
    .btn.primary[disabled]{opacity:.6;cursor:not-allowed}
    .count{display:block;font-weight:600;font-size:12px;color:#374151}
    .full-width-fix{
      width:100%;
      background-color:rgba(243,244,f6,.95);
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen py-8">
  <div class="w-full flex flex-col items-center">
    <div class="full-width-fix grid grid-cols-3 items-center gap-3 py-3 px-4 shadow-sm mb-4">
      <a href="/reports.html"
         class="justify-self-start text-[26px] text-indigo-600 hover:text-indigo-800 font-semibold underline transition-transform hover:scale-105">
        View All Reservations
      </a>
      <div></div>
    </div>

    <p id="msg" class="text-sm text-gray-600 mb-3" aria-live="polite"></p>

    <div class="mx-auto" style="width:max-content;">

      <div class="w-full flex justify-center mb-6">
  <div class="w-[900px] py-4 rounded-2xl border-4 border-red-500 bg-white font-extrabold text-red-500 text-4xl tracking-[0.25em] text-center shadow-[inset_0_0_0_6px_rgba(239,68,68,0.15)]">
    S T A G E
  </div>
</div>

      <div id="seating-map" aria-label="Seating map"></div>

      <div class="mt-4">
        <div class="w-[120px] h-[80px] border-4 border-green-600 rounded-md flex flex-col items-center justify-center bg-white shadow-md">
          <span class="text-green-600 font-bold text-sm tracking-wide leading-none">ENTRANCE</span>
          <span class="text-gray-500 text-xs leading-none mt-1">/ EXIT</span>
        </div>
      </div>
    </div>
  </div>

  <div id="reserve-modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="reserve-title">
    <div class="modal-card">
      <h3 id="reserve-title">Reserve Table <span id="rm-table" style="font-variant-numeric: tabular-nums;"></span></h3>
      <div class="modal-row">
        <label for="rm-login">Login ID</label>
        <input id="rm-login" type="text" placeholder="panosp" />
      </div>
      <div class="modal-row">
        <label for="rm-name">Employee Name</label>
        <input id="rm-name" type="text" placeholder="Panos Panay" />
      </div>
      <div class="modal-row">
        <label for="rm-seats">Seats</label>
        <select id="rm-seats"><option value="1" selected>1</option><option value="2">2</option><option value="3">3</option></select>
      </div>
      <div id="rm-error" class="text-red-700 text-xs min-h-4"></div>
      <div class="modal-actions">
        <button type="button" class="btn secondary" id="rm-cancel">Cancel</button>
        <button type="button" class="btn primary" id="rm-confirm">Confirm</button>
      </div>
    </div>
  </div>

  <script>
    const TOTAL=108, PER_ROW=12;

    // === (2) START: 桌位群組定義 ===
    
    // 1. 定義你的群組 (名稱、CSS class)
    const groupConfig = {
      'MAIN':    { displayName: 'Main',      cssClass: 'group-main' },    // 1
      'EERO':    { displayName: 'eero',      cssClass: 'group-eero' },    // 2
      'OPS':     { displayName: 'Operation', cssClass: 'group-ops' },     // 3
      'HW':      { displayName: 'Hardware',  cssClass: 'group-hw' },      // 4
      'SW':      { displayName: 'Software',  cssClass: 'group-sw' },      // 5
      'AI':      { displayName: 'AI Team',   cssClass: 'group-ai' },      // 6
      'DEVICES': { displayName: 'Devices',   cssClass: 'group-devices' }, // 7
      'OTHERS':  { displayName: 'Others',    cssClass: 'group-others' },  // 8
      'TPM':     { displayName: 'TPM',       cssClass: 'group-tpm' },     // 9
      'SIDEWALK':{ displayName: 'Sidewalk',  cssClass: 'group-sidewalk' } // 10
    };

    // 2. 指定桌號屬於哪個群組 (Key 是 groupConfig 裡的 ID)
    const tableGroupConfig = {
      // --- 你指定的桌號 (2桌) ---
      'MAIN':  [6, 7],
      
      // --- 依序分配剩下的 106 桌 ---
      // eero (18桌)
      'EERO': [
        1, 2, 3, 4, 5, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
      ],
      // Operation (20桌)
      'OPS': [
        21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 
        37, 38, 39, 40
      ],
      // Hardware (1
